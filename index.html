<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>3D 图片空间</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- favicon 防 404 -->
<link rel="icon" href="data:,">

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  overflow:hidden;
  background:#000;
  perspective:1400px;
  font-family:Arial;
}

#scene{
  position:absolute;
  width:100%;
  height:100%;
  transform-style:preserve-3d;
}

/* 每张图片的 3D 容器 */
.item{
  position:absolute;
  transform-style:preserve-3d;
  transition:transform 1.2s ease;
}

/* 图片本体 */
.pic{
  width:160px;
  height:160px;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 0 20px rgba(0,200,255,.7);
}

.pic img{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* 按钮 */
.controls{
  position:fixed;
  bottom:20px;
  width:100%;
  text-align:center;
}
button{
  padding:8px 16px;
  margin:0 6px;
  background:transparent;
  color:#0af;
  border:1px solid #0af;
  cursor:pointer;
}
</style>
</head>

<body>

<div id="scene"></div>

<div class="controls">
  <button onclick="layoutTable()">表格</button>
  <button onclick="layoutSphere()">球形</button>
  <button onclick="layoutHelix()">螺旋</button>
</div>

<script>
const scene = document.getElementById('scene');
const items = [];
const COUNT = 36;

/* 创建图片 */
for(let i=0;i<COUNT;i++){
  const item = document.createElement('div');
  item.className = 'item';

  const pic = document.createElement('div');
  pic.className = 'pic';

  const img = document.createElement('img');
  img.src = 'd1.jpg';   // 确保图片存在

  pic.appendChild(img);
  item.appendChild(pic);
  scene.appendChild(item);
  items.push(item);
}

/* 表格布局 */
function layoutTable(){
  items.forEach((el,i)=>{
    const x = (i%6)*200 - 500;
    const y = Math.floor(i/6)*200 - 400;
    el.style.transform = `translate3d(${x}px,${y}px,0px)`;
  });
}

/* 球形布局（完全替代 setFromCylindricalCoords） */
function layoutSphere(){
  items.forEach((el,i)=>{
    const phi = Math.acos(-1 + 2*i/COUNT);
    const theta = Math.sqrt(COUNT * Math.PI) * phi;

    const r = 600;
    const x = r * Math.sin(phi) * Math.cos(theta);
    const y = r * Math.cos(phi);
    const z = r * Math.sin(phi) * Math.sin(theta);

    el.style.transform = `translate3d(${x}px,${y}px,${z}px)`;
  });
}

/* 螺旋布局 */
function layoutHelix(){
  items.forEach((el,i)=>{
    const angle = i * 0.5;
    const x = 500 * Math.cos(angle);
    const z = 500 * Math.sin(angle);
    const y = i * 30 - 500;

    el.style.transform = `translate3d(${x}px,${y}px,${z}px)`;
  });
}

/* 场景旋转动画 */
let rotY = 0;
function animate(){
  rotY += 0.002;
  scene.style.transform = `rotateY(${rotY}rad)`;
  requestAnimationFrame(animate);
}

/* 初始化 */
layoutTable();
animate();
</script>

</body>
</html>
